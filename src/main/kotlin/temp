val places = airtable.listRecords("table_name", view = "view_name")
val placesString = "Список мест:\n" + places.records.joinToString(separator = "\n") { record ->
    "- ${record.fields["Location"]}"
}

val buttons = places.records.map { record ->
    InlineKeyboardButton("${record.fields["Location"]}", callbackData = "place:${record.id}")
}

val inlineKeyboardMarkup = InlineKeyboardMarkup(buttons.chunked(2)) // разбиваем кнопки на группы по 2
sendMessage(json, botTokenTg, chatId, "Список мест:", replyMarkup = inlineKeyboardMarkup)


// Обработка запросов на нажатие кнопок
if (update.callbackQuery?.data?.startsWith("place:") == true) {
    val placeId = update.callbackQuery?.data?.removePrefix("place:")
    val placeRecord = airtable.retrieveRecord("table_name", placeId!!)
    if (placeRecord != null) {
        val placeName = placeRecord.fields["Name"]
        val placeLocation = placeRecord.fields["Location"]
        val placeComments = placeRecord.fields["Comments"]
        // Отправляем подробную информацию о месте
        sendMessage(json, botTokenTg, chatId, """
            Информация о месте:
            Название: $placeName
            Местоположение: $placeLocation
            Комментарии: $placeComments
        """.trimIndent())
    }
}